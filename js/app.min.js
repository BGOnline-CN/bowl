/*!
 *
 * iTMON app.js
 *
 * Author: BGONLINE.CN 
 * Date: 2017-05-31 16:09:19 
 * Last Modified by:   BGONLINE 
 * Last Modified time: 2017-05-31 16:09:19 
 *
 */

// APP START
var bgoApp = angular.module('bgoApp', ['ui.router']);

bgoApp.run(['$rootScope', '$state', '$stateParams', '$window', '$templateCache', function($rootScope, $state, $stateParams, $window, $templateCache) {
  
  console.warn('开发者提示：您正在使用的产品为 《iTMON》 \r\n\r\n' + 
                '          -- 来自 Web工程师 BGONLINE.CN');
  $rootScope.$state = $state;
  $rootScope.$stateParams = $stateParams;
  $rootScope.$storage = $window.localStorage;

  $rootScope.app = {
    title: '',
    description: '',
    keywords: '',
    name: 'BGONLINE.CN'
  }
  
  $rootScope.$on('$stateChangeStart', function(event, toState, toParams, fromState, fromParams) {  

    var no_nav_page = ['/login', '/check_in']; // 不显示header 和footer的页面
    var current_page = toState.url;
    $rootScope.is_show_nav = true;
    
    for(var i = 0; i < no_nav_page.length; i++) {
      if(no_nav_page[i] == current_page) {
        $rootScope.is_show_nav = false;
        break;
      }
    }

    if (typeof(toState) !== 'undefined') {
      $templateCache.remove(toState.templateUrl);
    }
  });

}]);


// 路由配置
bgoApp.config(['$stateProvider', '$urlRouterProvider', function($stateProvider, $urlRouterProvider) {
  
  $urlRouterProvider.otherwise('/app/login');

  $stateProvider.state('app', {
    url: '/app',
    abstract: true,
    templateUrl: 'views/app.html',
    controller: 'bgoCtrl'

  }).state('app.login', {
    url: '/login',
    templateUrl: 'views/pages/login.html'

  }).state('app.check_in', {
    url: '/check_in',
    templateUrl: 'views/pages/check_in.html'
    
  })

}])

// bgoCtrl
bgoApp.controller('bgoCtrl', ['$scope', function($scope) {

  
  
  
}])